unit UqrCodeEvo;

interface

uses
  Winapi.Windows,
  Winapi.Messages,
  System.SysUtils,
  System.Variants,
  System.Classes,
  Vcl.Graphics,
  Vcl.Controls,
  Vcl.Forms,
  Vcl.Dialogs,
  Vcl.ExtCtrls,
  Vcl.StdCtrls,
  System.IOUtils;

type
  TFrmqrCodeEvo = class(TForm)
    Image1: TImage;
    Button1: TButton;
    Button2: TButton;
    pnStatus: TPanel;
    procedure FormClose(Sender: TObject; var Action: TCloseAction);
    procedure Button1Click(Sender: TObject);
    procedure Button2Click(Sender: TObject);
    procedure FormShow(Sender: TObject);
  private

  public

  end;

var
  FrmqrCodeEvo: TFrmqrCodeEvo;

implementation

{$R *.dfm}

procedure TFrmqrCodeEvo.Button1Click(Sender: TObject);
begin
//     DTWppx               := TDTWpp.Create(nil);
//     DTWppx.Session       := FSession;
//     DTWppx.SecretKey     := FSecretKey;
//     DTWppx.URLBase       := FURLBase;
//     DTWppx.Porta         := FPorta;
//     DTWppx.StartSession;
//
//     pnStatus.Caption := DTWppx.RetornoSession.status;
//
//     if DTWppx.RetornoSession.TemQrcode  then
//         Image1.Picture.LoadFromFile( TPath.GetTempPath + FSession + '.png'  );
//
//     FreeAndNil( DTWppx );
end;

procedure TFrmqrCodeEvo.Button2Click(Sender: TObject);
begin
//     DTWppx               := TDTWpp.Create(nil);
//     DTWppx.Session       := FSession;
//     DTWppx.SecretKey     := FSecretKey;
//     DTWppx.URLBase       := FURLBase;
//     DTWppx.Porta         := FPorta;
//     DTWppx.StatuSsession;
//
//     pnStatus.Caption := DTWppx.RetornoSession.status;
//
//     if DTWppx.RetornoSession.TemQrcode  then
//         Image1.Picture.LoadFromFile( TPath.GetTempPath + FSession + '.png' );
//
//     FreeAndNil( DTWppx );
//
//     if pnStatus.Caption = 'CONNECTED' then
//      CLOSE;
end;

procedure TFrmqrCodeEvo.FormClose(Sender: TObject; var Action: TCloseAction);
begin
  Action       := caFree;
  FrmqrCodeEvo := nil;
end;

procedure TFrmqrCodeEvo.FormShow(Sender: TObject);
begin
  Button1Click(Sender);
end;

end.
